flowchart TD
  %% Легенда: [Код] Название (E_i ч)
  %% Источник и сток
  START([Старт])
  END([Финиш])

  %% Регистрация и авторизация (5)
  subgraph REG[5 Регистрация и авторизация]
    t5_1["5.1 Авторизация по логину и паролю Twitch (110.67 ч)"]
    t5_2["5.2 Смена пароля (48.67 ч)"]
    t5_1 --> t5_2
  end

  %% Профиль (6)
  subgraph PROF[6 Настройка профиля]
    t6_1["6.1 Смена имени пользователя (21.33 ч)"]
    t6_2["6.2 Смена описания профиля (21.33 ч)"]
    t6_3["6.3 Смена фотографии пользователя (52.00 ч)"]
  end

  %% Подписки (2)
  subgraph SUBS[2 Подписки]
    t2_1["2.1 Отображение количества подписчиков (60.00 ч)"]
    t2_2["2.2 Отписка (24.67 ч)"]
  end

  %% Онлайн-чат (3)
  subgraph CHAT[3 Онлайн-чат]
    t3_2["3.2 Отображение сообщений (20.83 ч)"]
    t3_1["3.1 Писать в чат (24.33 ч)"]
  end

  %% Группировка/категории (7)
  subgraph GROUP[7 Группировка трансляций по категориям]
    t7_1["7.1 Группировка по играм (97.33 ч)"]
    t7_2["7.2 Группировка по жанрам и действиям (97.33 ч)"]
  end
  g_group((Группировка готова))
  t7_1 --> g_group
  t7_2 --> g_group

  %% Настройка трансляции (4)
  subgraph SETUP[4 Настройка трансляции]
    t4_1_1["4.1.1 Настройка перед запуском (320.00 ч)"]
    t4_2_1["4.2.1 Настройки для зрителя (286.67 ч)"]
    t4_2_2["4.2.2 Перемотка трансляции (149.33 ч)"]
  end

  %% Проведение трансляций (1)
  subgraph STREAM[1 Проведение трансляций]
    t1_1["1.1 Поиск трансляции (48.67 ч)"]
    t1_2["1.2 Просмотр трансляции (633.33 ч)"]
    t1_3["1.3 Запуск трансляции (273.33 ч)"]
    t1_4["1.4 Сохранение трансляции (533.33 ч)"]
  end

  %% Клипы (8)
  subgraph CLIPS[8 Создание клипов]
    t8_1["8.1 Создание клипа (200.00 ч)"]
    t8_2["8.2 Поделиться клипом (142.67 ч)"]
  end

  %% UI как отдельная ветка
  ui["UI для всех функций (733.33 ч)"]

  %% Тестирование (разбивка: альфа/бета/релиз) — суммарно 500 ч
  T_ALPHA["Альфа-тестирование (150.00 ч)"]
  T_BETA["Бета-тестирование (250.00 ч)"]
  T_RELEASE["Релизные испытания и регресс (100.00 ч)"]

  %% Аггрегаторы готовности
  g_settings((Настройка трансляции готова))
  g_streams((Проведение трансляций готово))
  g_chat((Чат готов))
  g_subs((Подписки готовы))
  g_profile((Профиль готов))
  g_auth((Аутентификация готова))
  g_clips((Клипы готовы))
  g_all((Функциональность готова))
  g_ready((Готово к тестированию))

  %% Стартовые зависимости
  START --> t5_1
  START --> t7_1
  START --> t7_2
  START --> t4_1_1
  START --> t4_2_1
  START --> t4_2_2
  START --> t3_2
  START --> ui

  %% Зависимости между подсистемами
  t5_1 --> t3_1
  t5_1 --> t2_1
  t5_1 --> t2_2
  t5_1 --> t6_1
  t5_1 --> t6_2
  t5_1 --> t6_3

  g_group --> t1_1
  t4_2_1 --> t1_2
  t4_1_1 --> t1_3 --> t1_4
  t1_4 --> t8_1 --> t8_2

  %% Закрытие подгрупп
  t4_1_1 --> g_settings
  t4_2_1 --> g_settings
  t4_2_2 --> g_settings

  t1_1 --> g_streams
  t1_2 --> g_streams
  t1_4 --> g_streams

  t3_1 --> g_chat
  t3_2 --> g_chat

  t2_1 --> g_subs
  t2_2 --> g_subs

  t6_1 --> g_profile
  t6_2 --> g_profile
  t6_3 --> g_profile

  t5_2 --> g_auth

  t8_2 --> g_clips

  %% Сборка функциональности → тестирование → финиш
  g_streams --> g_all
  g_subs --> g_all
  g_chat --> g_all
  g_settings --> g_all
  g_profile --> g_all
  g_auth --> g_all
  g_clips --> g_all

  g_all --> g_ready
  ui --> g_ready
  g_ready --> T_ALPHA --> T_BETA --> T_RELEASE --> END
